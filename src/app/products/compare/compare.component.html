<div class="dialog-overlay" *ngIf="isDialogOpen">
  <div class="dialog-box">
    <h3>Confirmation</h3>
    <p>{{ dialogMessage }}</p>
    <div class="dialog-actions">
      <button (click)="handleConfirmation(false)" class="cancel-btn">No</button>
      <button (click)="handleConfirmation(true)" class="confirm-btn">
        Yes
      </button>
    </div>
  </div>
</div>

<div class="container-fluid mt-5">
  <h2 class="text-center mb-4" style="color: #6f42c1">Compare Products</h2>

  <!-- Table view for all screens (including mobile) -->
  <div class="table-responsive">
    <table class="table compare-table">
      <thead class="table-primary text-center">
        <tr>
          <th>Parameters</th>
          <th *ngFor="let product of compareItems">{{ product.pname }}</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="fw-bold">Image</td>
          <td
            *ngFor="let product of compareItems"
            class="text-center"
            data-label="Image"
          >
            <img
              [src]="product.image"
              alt="{{ product.pname }}"
              class="product-image"
            />
          </td>
        </tr>
        <tr>
          <td class="fw-bold">Brand</td>
          <td
            *ngFor="let product of compareItems"
            class="text-center"
            data-label="Brand"
          >
            {{ product.brand }}
          </td>
        </tr>
        <tr>
          <td class="fw-bold">Color</td>
          <td
            *ngFor="let product of compareItems"
            class="text-center"
            data-label="Color"
          >
            {{ product.color }}
          </td>
        </tr>
        <tr>
          <td class="fw-bold">Storage</td>
          <td
            *ngFor="let product of compareItems"
            class="text-center"
            data-label="Storage"
          >
            {{ product.disksize }}
          </td>
        </tr>
        <tr>
          <td class="fw-bold">Ram Size</td>
          <td
            *ngFor="let product of compareItems"
            class="text-center"
            data-label="Ram Size"
          >
            {{ product.ram }}
          </td>
        </tr>
        <tr>
          <td class="fw-bold">Price</td>
          <td
            *ngFor="let product of compareItems"
            class="text-center"
            data-label="Price"
          >
            {{ product.psp | currency : "INR" }}
          </td>
        </tr>
        <tr>
          <td class="fw-bold">Description</td>
          <td
            *ngFor="let product of compareItems"
            class="text-muted small"
            data-label="Description"
          >
            {{ product.description }}
          </td>
        </tr>
        <tr>
          <td class="fw-bold text-danger">Actions</td>
          <td
            *ngFor="let product of compareItems"
            class="text-center"
            data-label="Actions"
          >
            <button
              (click)="removeFromCompare(product.id)"
              class="btn btn-outline-danger btn-sm"
              title="Remove from compare"
            >
              <i class="bi bi-trash"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="d-flex justify-content-end align-content-center my-2">
      <button class="btn btn-danger" (click)="clearComparison()">
        Delete All
      </button>
    </div>
  </div>

  <!-- Message for empty compare list -->
  <div *ngIf="compareItems.length === 0" class="text-center text-muted">
    <p>No products in the compare list.</p>
  </div>
</div>
